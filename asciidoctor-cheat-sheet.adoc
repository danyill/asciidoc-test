= Asciidoctor Quick Reference
Simon Maple <https://twitter.com/sjmaple>; Robert Scholte <https://twitter.com/rfscholte>
:authorbio_1: Java Champion and Developer Advocate at Snyk
:authorbio_2: CEO of Sourcegrounds, Chairman of the Apache Maven project
:pdf-width: 420mm
:pdf-height: 297mm
:icons: font
:stem:
// :toc: left
// :url-docs: https://asciidoctor.org/docs
// :url-gem: https://rubygems.org/gems/asciidoctor

== Document Structure

=== Header

 // header must be flush with left margin
 = Document Title
 Author Name <author@example.org>
 v1.0, 2019-01-01

=== Sections

 // must be flush with left margin
 = Document Title (Level 0)
 == Level 1
 === Level 2
 ==== Level 3
 ===== Level 4
 ====== Level 5
 == Back at Level 1

== Paragraphs

A blank line separates paragraphs.

Line breaks are not preserved by default.

Set the hardbreaks option to preserve line breaks.

 [%hardbreaks]
 This paragraph carries the `hardbreaks` option.
 Line breaks are now preserved.

Indenting with one or more spaces creates a literal paragraph. This disables text formatting, preserves spaces and line breaks, and is displayed in a monospaced font.

 // commented lines begin like this and are not shown in the output.

 ////
 This is how we fence 
 multi-line comments
 ////

 [sidebar#id.role]
 A style, ID, and/or role gives a paragraph (or block) special meaning, like this sidebar.


== Admonitions

Asciidoctor has 5 admonition types: `NOTE:`, `TIP:`, `IMPORTANT:`, `CAUTION:` and `WARNING:`.

TIP: Start a paragraph like this one beginning `TIP:` and it will be displayed to catch your reader's attention.

You can also fence an admonition using `====` and set a title by starting a line with `.` This can help with complex multi-line content.

[IMPORTANT] 
.Feeding the Werewolves
==== 
Werewolves are hardy community members but remember to avoid chocolate.

They are also lactose intolerant so avoid dairy.
====



NOTE: An admonition paragraph, like this note, grabs the reader's attention.

TIP: Convert this document using the `asciidoctor` command to see the output produced from it.

== Text Formatting
:hardbreaks:

.Constrained (applied at word boundaries)
*strong importance* (aka bold)
_stress emphasis_ (aka italic)
`monospaced` (aka typewriter text)
"`double`" and '`single`' typographic quotes
+passthrough text+ (substitutions disabled)
`+literal text+` (monospaced with substitutions disabled)

.Unconstrained (applied anywhere)
**C**reate+**R**ead+**U**pdate+**D**elete
fan__freakin__tastic
``mono``culture

.Replacements
A long time ago in a galaxy far, far away...
(C) 1976 Arty Artisan
I believe I shall--no, actually I won't.

.Macros
// where c=specialchars, q=quotes, a=attributes, r=replacements, m=macros, p=post_replacements, etc.
The European icon:flag[role=blue] is blue & contains pass:[************] arranged in a icon:circle-o[role=yellow].
The pass:c[->] operator is often referred to as the stabby lambda.
Since `pass:[++]` has strong priority in AsciiDoc, you can rewrite pass:c,a,r[C++ => C{pp}].
// activate stem support by adding `:stem:` to the document header
stem:[sqrt(4) = 2]

:!hardbreaks:
== Attributes

 // define attributes in the document header; must be flush with left margin
 :name: value

You can download and install Asciidoctor {asciidoctor-version} from {url-gem}.
C{pp} is not required, only Ruby.
Use a leading backslash to output a word enclosed in curly braces, like \{name}.

== Links

[%hardbreaks]
https://example.org/page[A webpage]
link:../path/to/file.txt[A local file]
xref:document.adoc[A sibling document]
mailto:hello@example.org[Email to say hello!]

== Anchors

[[idname,reference text]]
// or written using normal block attributes as `[#idname,reftext=reference text]`
A paragraph (or any block) with an anchor (aka ID) and reftext.

See <<idname>> or <<idname,optional text of internal link>>.

xref:document.adoc#idname[Jumps to anchor in another document].

This paragraph has a footnote.footnote:[This is the text of the footnote.]

== Lists

=== Unordered

* level 1
** level 2
*** level 3
**** level 4
***** etc.
* back at level 1
+
Attach a block or paragraph to a list item using a list continuation (which you can enclose in an open block).

.Some Authors
[circle]
- Edgar Allen Poe
- Sheri S. Tepper
- Bill Bryson

=== Ordered

. Step 1
. Step 2
.. Step 2a
.. Step 2b
. Step 3

.Remember your Roman numerals?
[upperroman]
. is one
. is two
. is three

=== Checklist

* [x] checked
* [ ] not checked

=== Callout

// enable callout bubbles by adding `:icons: font` to the document header
[,ruby]
----
puts 'Hello, World!' # <1>
----
<1> Prints `Hello, World!` to the console.

=== Description

first term:: description of first term
second term::
description of second term



== Blocks

--
open - a general-purpose content wrapper; useful for enclosing content to attach to a list item
--

// recognized types include CAUTION, IMPORTANT, NOTE, TIP, and WARNING
// enable admonition icons by setting `:icons: font` in the document header
[NOTE]
====
admonition - a notice for the reader, ranging in severity from a tip to an alert
====

====
example - a demonstration of the concept being documented
====

.Toggle Me
[%collapsible]
====
collapsible - these details are revealed by clicking the title
====

****
sidebar - auxiliary content that can be read independently of the main content
****

....
literal - an exhibit that features program output
....

----
listing - an exhibit that features program input, source code, or the contents of a file
----

[,language]
----
source - a listing that is embellished with (colorized) syntax highlighting
----

```language
fenced code - a shorthand syntax for the source block
```

[,attribution,citetitle]
____
quote - a quotation or excerpt; attribution with title of source are optional
____

[verse,attribution,citetitle]
____
verse - a literary excerpt, often a poem; attribution with title of source are optional
____

++++
pass - content passed directly to the output document; often raw HTML
++++

// activate stem support by adding `:stem:` to the document header
[stem]
++++
x = y^2
++++

////
comment - content which is not included in the output document
////

== Tables

.Table Attributes
[cols=>1h;2d,width=50%,frame=topbot]
|===
| Attribute Name | Values

| options
| header,footer,autowidth

| cols
| colspec[;colspec;...]

| grid
| all \| cols \| rows \| none

| frame
| all \| sides \| topbot \| none

| stripes
| all \| even \| odd \| none

| width
| (0%..100%)

| format
| psv {vbar} csv {vbar} dsv
|===

== Multimedia

image::screenshot.png[block image,800,450]

Press image:reload.svg[reload,16,opts=interactive] to reload the page.

video::movie.mp4[width=640,start=60,end=140,options=autoplay]

video::aHjpOzsQ9YI[youtube]

video::300817511[vimeo]

== Breaks

// thematic break (aka horizontal rule)
---

// page break
<<<

////

== More 

Extensions
asciidoctor-diagram

Antora
Hugo
Jekyll

ToC

////


////

Moved -- advanced topics.

=== Includes

Bring content in from other files

 // must be flush with left margin
 include::basics.adoc[]

 // define -a allow-uri-read to allow content to be read from URI
 include::https://example.org/installation.adoc[]

////

////
== Encrypt your Secrets 1 2 3 4 5 6 7 8 9 10

```
$ mvn --encrypt-master-password
Master password: *********
{encrypted_master_password}
```

Store this in `~/.m2/settings-security.xml`

```xml
<settingsSecurity>
 <master>{encrypted_master_password}</master>
</settingsSecurity>
```
Now encrypt your server password:

```
mvn --encrypt-password
Master password: *********
{encrypted_password}
```

Store this in your `settings.xml` file as follows:

```xml
<server>
 <id>my.server</id>
 <username>smaple</username>
 <password>{encrypted_password}</password>
</server>
```

== Don't use passwords in the CLI

Never enter passwords in plain text on the CLI:

[source,sh,role=dont]
----
$ mvn --encrypt-master-password P@ssw0rd

$ mvn --encrypt-password P@ssw0rd
----

== Always Use HTTPS

Use HTTPS to connect to remote Maven repositories, to avoid MITM attacks.

Ensure your `<repositories>` and `<pluginRepositories>` use https in their URLs.

== Check Dependency Health

Verify the health of your third-party libraries by confirming they have:

[.do]
* [x] A team of committers
* [x] Well documented security policies
* [x] Regular updates and releases

== Test for Known Vulnerabilities

Do not use Maven dependencies with known vulnerabilities. +
Use a tool like Snyk to:

[.do]
* [x] Test your app for known vulnerabilities.
* [x] Automatically fix issues that exist.
* [x] Continuously monitor for new vulnerabilities

== Test your Checksums

As part of validating the authenticity of your dependencies,
test their checksums using the -C flag on Maven commands:

```
$ mvn -C install
// fail if checksums don’t match

$ mvn -c install
// warn if checksums don’t match
```

== Don't use Properties for Passwords

Never store your secrets in your pom.xml properties.

[source,xml,role=dont]
----
<properties>
  <my.property>P@ssw0rd</my.property>
</properties>
----

== Use Maven developers/roles

Use Maven roles to state who should be contacted for security issues.

```xml
<developers>
 <developer>
   <id>grander</id>
   <name>Danny Grander</name>
   <email>security@your_org.com</email>
   <roles>
     <role>security</role>
   </roles>
 <developer>
<developers>
```

== Stay up-to-date

Try to stay on the latest releases of Maven. Check the download page for the latest version.

Avoid Maven 3.0.4 as it ignores certificates for HTTPS connections.

== Check Security Bulletins

Monitor the security bulletins the Apache Maven team publish on the
https://maven.apache.org/security.html[Maven site].


////